package com.example.myandroidstores;

import java.util.WeakHashMap;

import android.app.Application;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.util.Log;

public class App extends Application{

	private WeakHashMap<Integer, BaseFragmentActivity> mAcCollection ;
	
	@Override
	public void onCreate() {
		super.onCreate();
		
		Log.e("Max", "App onCreate");
		mAcCollection = new WeakHashMap<Integer, BaseFragmentActivity>();
		try {
			ApplicationInfo info = getPackageManager().getApplicationInfo(
					getPackageName(), PackageManager.GET_META_DATA);
			int s_app_meta_info = info.metaData.getInt("test_app_meta_data");
			
			Log.e("Max", "App s_app_meta_info="+s_app_meta_info);
			Object object = new Object();
			object.hashCode();
		} catch (NameNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

	
	/**
	 * 添加Activity记录
	 * @param baseFragmentActivity
	 */
	private void add(BaseFragmentActivity baseFragmentActivity){
		if(null == baseFragmentActivity){
			throw new NullPointerException("baseFragmentActivity is null");
		}
		boolean added = mAcCollection.containsKey(baseFragmentActivity.hashCode());
		if(!added){
			mAcCollection.put(baseFragmentActivity.hashCode(), baseFragmentActivity);
		}
	}
}
